{"openapi":"3.0.0","paths":{"/api":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":"Welcome message retrieved successfully"}},"summary":"Get welcome message","tags":["app"]}},"/api/health":{"get":{"operationId":"HealthController_check","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"summary":"Get overall health status","tags":["health"]}},"/api/health/database":{"get":{"operationId":"HealthController_checkDatabase","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"summary":"Get database health status","tags":["health"]}},"/api/health/redis":{"get":{"operationId":"HealthController_checkRedis","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"summary":"Get Redis health status","tags":["health"]}},"/api/health/memory":{"get":{"operationId":"HealthController_checkMemory","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"summary":"Get memory health status","tags":["health"]}},"/api/health/disk":{"get":{"operationId":"HealthController_checkDisk","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"summary":"Get disk health status","tags":["health"]}},"/api/health/info":{"get":{"operationId":"HealthController_getInfo","parameters":[],"responses":{"200":{"description":"Application information retrieved successfully"}},"summary":"Get application information","tags":["health"]}},"/api/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":"Usuário criado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"userId":{"type":"string"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}}}}}}},"400":{"description":"Dados inválidos"},"409":{"description":"Email já está em uso"}},"summary":"Registra um novo usuário","tags":["auth"]}},"/api/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login realizado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"userId":{"type":"string"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string"},"nome":{"type":"string"},"email":{"type":"string"},"avatar":{"type":"string"},"isPremium":{"type":"boolean"}}}}}}}}}},"401":{"description":"Credenciais inválidas"}},"summary":"Autentica um usuário","tags":["auth"]}},"/api/auth/forgot-password":{"post":{"operationId":"AuthController_forgotPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordDto"}}}},"responses":{"200":{"description":"Email de reset enviado (se o email existir)"}},"summary":"Solicita reset de senha","tags":["auth"]}},"/api/auth/reset-password":{"post":{"operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"200":{"description":"Senha redefinida com sucesso"},"400":{"description":"Token inválido ou expirado"}},"summary":"Redefine a senha","tags":["auth"]}},"/api/auth/refresh":{"post":{"operationId":"AuthController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"Token renovado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}}}}},"401":{"description":"Refresh token inválido ou expirado"}},"summary":"Renova o access token","tags":["auth"]}},"/api/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"Logout realizado com sucesso"},"401":{"description":"Não autorizado"}},"security":[{"JWT-auth":[]}],"summary":"Realiza logout","tags":["auth"]}},"/api/auth/me":{"get":{"operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":"Dados do usuário","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"nome":{"type":"string"},"isPremium":{"type":"boolean"},"avatar":{"type":"string"}}}}}},"401":{"description":"Não autorizado"}},"security":[{"JWT-auth":[]}],"summary":"Obtém dados do usuário autenticado","tags":["auth"]}},"/api/auth/google":{"get":{"operationId":"AuthController_googleAuth","parameters":[],"responses":{"302":{"description":"Redireciona para Google OAuth"}},"summary":"Inicia autenticação Google OAuth","tags":["auth"]}},"/api/auth/google/callback":{"get":{"operationId":"AuthController_googleAuthCallback","parameters":[],"responses":{"200":{"description":"Login OAuth realizado com sucesso"},"401":{"description":"Falha na autenticação OAuth"}},"summary":"Callback Google OAuth","tags":["auth"]}},"/api/auth/apple":{"get":{"operationId":"AuthController_appleAuth","parameters":[],"responses":{"302":{"description":"Redireciona para Apple OAuth"}},"summary":"Inicia autenticação Apple OAuth","tags":["auth"]}},"/api/auth/apple/callback":{"get":{"operationId":"AuthController_appleAuthCallback","parameters":[],"responses":{"200":{"description":"Login OAuth realizado com sucesso"},"401":{"description":"Falha na autenticação OAuth"}},"summary":"Callback Apple OAuth","tags":["auth"]}},"/api/auth/link-oauth":{"post":{"operationId":"AuthController_linkOAuthAccount","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthLinkDto"}}}},"responses":{"200":{"description":"Conta OAuth vinculada com sucesso"},"400":{"description":"Dados inválidos"},"401":{"description":"Não autorizado"},"409":{"description":"Usuário já possui conta OAuth vinculada"}},"security":[{"JWT-auth":[]}],"summary":"Vincula conta OAuth a conta existente","tags":["auth"]}},"/api/users/{id}":{"get":{"operationId":"UsersController_findById","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"200":{"description":"Perfil do usuário encontrado"},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Buscar perfil de usuário por ID","tags":["users"]},"put":{"operationId":"UsersController_updateProfile","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"Perfil atualizado com sucesso"},"404":{"description":"Usuário não encontrado"},"409":{"description":"Email já está em uso"}},"security":[{"JWT-auth":[]}],"summary":"Atualizar perfil do usuário","tags":["users"]},"delete":{"operationId":"UsersController_softDelete","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"204":{"description":"Conta deletada com sucesso"},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Deletar conta do usuário (soft delete)","tags":["users"]}},"/api/users/{id}/password":{"put":{"operationId":"UsersController_changePassword","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"204":{"description":"Senha alterada com sucesso"},"401":{"description":"Senha atual incorreta"},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Alterar senha do usuário","tags":["users"]}},"/api/users/{id}/settings":{"get":{"operationId":"UsersController_getUserSettings","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"200":{"description":"Configurações encontradas"},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Buscar configurações do usuário","tags":["users"]},"put":{"operationId":"UsersController_updateSettings","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserSettingsDto"}}}},"responses":{"200":{"description":"Configurações atualizadas"},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Atualizar configurações do usuário","tags":["users"]}},"/api/users/avatar":{"post":{"operationId":"UsersController_uploadAvatar","parameters":[],"responses":{"200":{"description":"Avatar carregado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadAvatarResponseDto"}}}},"400":{"description":"Arquivo inválido ou formato não suportado"}},"security":[{"JWT-auth":[]}],"summary":"Upload de avatar do usuário","tags":["users"]}},"/api/users/{id}/ratings":{"post":{"operationId":"UsersController_createRating","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário a ser avaliado","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRatingDto"}}}},"responses":{"201":{"description":"Avaliação criada com sucesso"},"400":{"description":"Não é possível avaliar a si mesmo"},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Avaliar usuário","tags":["users"]},"get":{"operationId":"UsersController_getUserRatings","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"Página (padrão: 1)","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Itens por página (padrão: 10)","schema":{"type":"number"}}],"responses":{"200":{"description":"Lista de avaliações"}},"security":[{"JWT-auth":[]}],"summary":"Obter avaliações do usuário","tags":["users"]}},"/api/users/{id}/avatar":{"get":{"operationId":"UsersController_getAvatarUrl","parameters":[{"name":"id","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}}],"responses":{"200":{"description":"URL do avatar","content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string","nullable":true}}}}}},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Obter URL do avatar do usuário","tags":["users"]}},"/api/items":{"post":{"operationId":"ItemsController_create","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/CreateItemDto"}}}},"responses":{"201":{"description":"Item criado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemResponseDto"}}}}},"security":[{"JWT-auth":[]}],"summary":"Criar novo item","tags":["items"]},"get":{"operationId":"ItemsController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"Página atual","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Itens por página","schema":{"minimum":1,"maximum":100,"default":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Pesquisa por texto no título e descrição","schema":{"type":"string"}},{"name":"categoria","required":false,"in":"query","description":"Filtrar por categoria","schema":{"type":"string"}},{"name":"subcategoria","required":false,"in":"query","description":"Filtrar por subcategoria","schema":{"type":"string"}},{"name":"tipo","required":false,"in":"query","description":"Filtrar por tipo de transação","schema":{"type":"string","enum":["troca","doacao","venda"]}},{"name":"condicao","required":false,"in":"query","description":"Filtrar por condição","schema":{"type":"string","enum":["novo","seminovo","usado"]}},{"name":"status","required":false,"in":"query","description":"Filtrar por status","schema":{"type":"string","enum":["ativo","pendente","inativo","vendido","trocado"]}},{"name":"precoMin","required":false,"in":"query","description":"Preço mínimo","schema":{"type":"number"}},{"name":"precoMax","required":false,"in":"query","description":"Preço máximo","schema":{"type":"number"}},{"name":"localizacao","required":false,"in":"query","description":"Filtrar por localização","schema":{"type":"string"}},{"name":"latitude","required":false,"in":"query","description":"Latitude para busca por proximidade","schema":{"type":"number"}},{"name":"longitude","required":false,"in":"query","description":"Longitude para busca por proximidade","schema":{"type":"number"}},{"name":"radius","required":false,"in":"query","description":"Raio de busca em quilômetros","schema":{"default":10,"type":"number"}},{"name":"destacado","required":false,"in":"query","description":"Apenas itens destacados","schema":{"type":"boolean"}},{"name":"tags","required":false,"in":"query","description":"Filtrar por tags","schema":{"type":"array","items":{"type":"string"}}},{"name":"sortBy","required":false,"in":"query","description":"Campo para ordenação","schema":{"default":"createdAt","type":"string","enum":["createdAt","updatedAt","visualizacoes","likes","preco","titulo"]}},{"name":"sortOrder","required":false,"in":"query","description":"Ordem da classificação","schema":{"default":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":"Lista de itens recuperada com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedItemsResponseDto"}}}}},"summary":"Listar itens com filtros","tags":["items"]}},"/api/items/user/{userId}":{"get":{"operationId":"ItemsController_findByUserId","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"Página atual","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Itens por página","schema":{"minimum":1,"maximum":100,"default":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Pesquisa por texto no título e descrição","schema":{"type":"string"}},{"name":"categoria","required":false,"in":"query","description":"Filtrar por categoria","schema":{"type":"string"}},{"name":"subcategoria","required":false,"in":"query","description":"Filtrar por subcategoria","schema":{"type":"string"}},{"name":"tipo","required":false,"in":"query","description":"Filtrar por tipo de transação","schema":{"type":"string","enum":["troca","doacao","venda"]}},{"name":"condicao","required":false,"in":"query","description":"Filtrar por condição","schema":{"type":"string","enum":["novo","seminovo","usado"]}},{"name":"status","required":false,"in":"query","description":"Filtrar por status","schema":{"type":"string","enum":["ativo","pendente","inativo","vendido","trocado"]}},{"name":"precoMin","required":false,"in":"query","description":"Preço mínimo","schema":{"type":"number"}},{"name":"precoMax","required":false,"in":"query","description":"Preço máximo","schema":{"type":"number"}},{"name":"localizacao","required":false,"in":"query","description":"Filtrar por localização","schema":{"type":"string"}},{"name":"latitude","required":false,"in":"query","description":"Latitude para busca por proximidade","schema":{"type":"number"}},{"name":"longitude","required":false,"in":"query","description":"Longitude para busca por proximidade","schema":{"type":"number"}},{"name":"radius","required":false,"in":"query","description":"Raio de busca em quilômetros","schema":{"default":10,"type":"number"}},{"name":"destacado","required":false,"in":"query","description":"Apenas itens destacados","schema":{"type":"boolean"}},{"name":"tags","required":false,"in":"query","description":"Filtrar por tags","schema":{"type":"array","items":{"type":"string"}}},{"name":"sortBy","required":false,"in":"query","description":"Campo para ordenação","schema":{"default":"createdAt","type":"string","enum":["createdAt","updatedAt","visualizacoes","likes","preco","titulo"]}},{"name":"sortOrder","required":false,"in":"query","description":"Ordem da classificação","schema":{"default":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":"Lista de itens do usuário recuperada com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedItemsResponseDto"}}}}},"summary":"Listar itens de um usuário específico","tags":["items"]}},"/api/items/{id}":{"get":{"operationId":"ItemsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"incrementView","required":false,"in":"query","description":"Incrementar contador de visualizações","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Item encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemResponseDto"}}}}},"summary":"Buscar item por ID","tags":["items"]},"patch":{"operationId":"ItemsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateItemDto"}}}},"responses":{"200":{"description":"Item atualizado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemResponseDto"}}}}},"security":[{"JWT-auth":[]}],"summary":"Atualizar item","tags":["items"]},"delete":{"operationId":"ItemsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Item removido com sucesso"}},"security":[{"JWT-auth":[]}],"summary":"Remover item (soft delete)","tags":["items"]}},"/api/items/{id}/images":{"post":{"operationId":"ItemsController_addImages","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Imagens adicionadas com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadItemImagesResponseDto"}}}}},"security":[{"JWT-auth":[]}],"summary":"Adicionar imagens ao item","tags":["items"]}},"/api/items/{id}/images/{imageIndex}":{"delete":{"operationId":"ItemsController_removeImage","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"imageIndex","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Imagem removida com sucesso"}},"security":[{"JWT-auth":[]}],"summary":"Remover imagem do item","tags":["items"]}},"/api/items/{id}/views":{"post":{"operationId":"ItemsController_incrementView","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Visualização registrada com sucesso"}},"summary":"Incrementar contador de visualizações","tags":["items"]}},"/api/items/{id}/stats":{"get":{"operationId":"ItemsController_getStats","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Estatísticas do item","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemStatsDto"}}}}},"security":[{"JWT-auth":[]}],"summary":"Obter estatísticas do item","tags":["items"]}},"/api/items/{id}/status":{"patch":{"operationId":"ItemsController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateItemStatusDto"}}}},"responses":{"200":{"description":"Status do item atualizado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemResponseDto"}}}}},"security":[{"JWT-auth":[]}],"summary":"Atualizar status do item","tags":["items"]}},"/api/discovery/feed":{"get":{"description":"Retorna itens personalizados com base em localização, preferências e filtros. Exclui itens próprios e já interagidos. Suporta filtros avançados e cache de 2 minutos.","operationId":"DiscoveryController_getFeed","parameters":[{"name":"page","required":false,"in":"query","description":"Página atual","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Itens por página","schema":{"minimum":1,"maximum":50,"default":20,"type":"number"}},{"name":"latitude","required":false,"in":"query","description":"Latitude para busca por proximidade","schema":{"type":"number"}},{"name":"longitude","required":false,"in":"query","description":"Longitude para busca por proximidade","schema":{"type":"number"}},{"name":"radius","required":false,"in":"query","description":"Raio de busca em quilômetros","schema":{"default":50,"type":"number"}},{"name":"categoria","required":false,"in":"query","description":"Filtrar por categoria","schema":{"type":"string"}},{"name":"tipo","required":false,"in":"query","description":"Filtrar por tipo de transação","schema":{"type":"string","enum":["troca","doacao","venda"]}},{"name":"condicao","required":false,"in":"query","description":"Filtrar por condição","schema":{"type":"string","enum":["novo","seminovo","usado"]}},{"name":"precoMin","required":false,"in":"query","description":"Preço mínimo","schema":{"type":"number"}},{"name":"precoMax","required":false,"in":"query","description":"Preço máximo","schema":{"type":"number"}},{"name":"tags","required":false,"in":"query","description":"Filtrar por tags","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"Feed de itens recuperado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedResponseDto"}}}},"401":{"description":"Não autorizado"}},"security":[{"JWT-auth":[]}],"summary":"Obter feed de descoberta","tags":["discovery"]}},"/api/discovery/like/{itemId}":{"post":{"description":"Registra um like em um item. Se houver match mútuo, cria automaticamente uma conversa. Suporta likes normais e superlikes.","operationId":"DiscoveryController_likeItem","parameters":[{"name":"itemId","required":true,"in":"path","description":"ID do item a ser curtido","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeItemDto"}}}},"responses":{"201":{"description":"Like registrado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeResponseDto"}}}},"400":{"description":"Item já foi curtido ou é seu próprio item"},"404":{"description":"Item não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Curtir um item (swipe right)","tags":["discovery"]}},"/api/discovery/pass/{itemId}":{"post":{"description":"Marca um item como visto/descartado. O item não aparecerá mais no feed.","operationId":"DiscoveryController_passItem","parameters":[{"name":"itemId","required":true,"in":"path","description":"ID do item a ser descartado","schema":{"type":"string"}}],"responses":{"201":{"description":"Item descartado com sucesso"},"400":{"description":"Item já foi interagido ou é seu próprio item"},"404":{"description":"Item não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Passar um item (swipe left)","tags":["discovery"]}},"/api/discovery/liked-items":{"get":{"description":"Retorna todos os itens que o usuário curtiu, com indicação de match. Suporta paginação.","operationId":"DiscoveryController_getLikedItems","parameters":[{"name":"page","required":false,"in":"query","description":"Página atual","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Itens por página","schema":{"example":20,"type":"number"}}],"responses":{"200":{"description":"Lista de itens curtidos recuperada com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikedItemsResponseDto"}}}}},"security":[{"JWT-auth":[]}],"summary":"Listar itens curtidos","tags":["discovery"]}},"/api/discovery/liked-items/{itemId}":{"delete":{"description":"Remove o like de um item. Não desfaz matches já criados.","operationId":"DiscoveryController_removeLike","parameters":[{"name":"itemId","required":true,"in":"path","description":"ID do item para remover o like","schema":{"type":"string"}}],"responses":{"200":{"description":"Like removido com sucesso"},"404":{"description":"Like não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Remover like de um item","tags":["discovery"]}},"/api/discovery/matches":{"get":{"description":"Retorna todos os matches do usuário, incluindo informações da conversa criada. Ordenado por data de match (mais recentes primeiro).","operationId":"DiscoveryController_getMatches","parameters":[],"responses":{"200":{"description":"Lista de matches recuperada com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MatchesResponseDto"}}}}},"security":[{"JWT-auth":[]}],"summary":"Listar todos os matches","tags":["discovery"]}},"/api/conversations/user/{userId}":{"get":{"description":"Retorna todas as conversas do usuário com filtros (não lidas, arquivadas, fixadas). Inclui informações do outro participante, item relacionado, última mensagem e contadores.","operationId":"ConversationsController_getUserConversations","parameters":[{"name":"userId","required":true,"in":"path","description":"ID do usuário","schema":{"type":"string"}},{"name":"filter","required":false,"in":"query","description":"Filtro de conversas","schema":{"default":"all","type":"string","enum":["all","unread","archived","pinned"]}},{"name":"page","required":false,"in":"query","description":"Página atual","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Itens por página","schema":{"minimum":1,"default":20,"type":"number"}}],"responses":{"200":{"description":"Lista de conversas recuperada com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationListResponseDto"}}}},"401":{"description":"Não autorizado"}},"security":[{"JWT-auth":[]}],"summary":"Listar conversas do usuário","tags":["conversations"]}},"/api/conversations/{conversacaoId}/messages":{"get":{"description":"Retorna mensagens de uma conversa com paginação reversa (cursor-based). Apenas participantes da conversa podem acessar.","operationId":"ConversationsController_getMessages","parameters":[{"name":"conversacaoId","required":true,"in":"path","description":"ID da conversa","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","description":"Número de mensagens por página","schema":{"minimum":1,"default":50,"type":"number"}},{"name":"before","required":false,"in":"query","description":"ID da última mensagem (para paginação reversa)","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de mensagens recuperada com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageListResponseDto"}}}},"403":{"description":"Sem permissão para acessar esta conversa"},"404":{"description":"Conversa não encontrada"}},"security":[{"JWT-auth":[]}],"summary":"Listar mensagens de uma conversa","tags":["conversations"]},"post":{"description":"Envia uma nova mensagem na conversa. Suporta texto, anexos (imagens/arquivos) e respostas (reply).","operationId":"ConversationsController_sendMessage","parameters":[{"name":"conversacaoId","required":true,"in":"path","description":"ID da conversa","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/CreateMessageDto"}}}},"responses":{"201":{"description":"Mensagem enviada com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageDto"}}}},"403":{"description":"Sem permissão para enviar mensagens nesta conversa"},"404":{"description":"Conversa não encontrada"}},"security":[{"JWT-auth":[]}],"summary":"Enviar mensagem em uma conversa","tags":["conversations"]}},"/api/conversations/{conversacaoId}/read":{"put":{"description":"Marca todas as mensagens não lidas de uma conversa como lidas. Atualiza o status de leitura e reseta o contador de mensagens não lidas.","operationId":"ConversationsController_markAsRead","parameters":[{"name":"conversacaoId","required":true,"in":"path","description":"ID da conversa","schema":{"type":"string"}}],"responses":{"200":{"description":"Mensagens marcadas como lidas"},"403":{"description":"Sem permissão para acessar esta conversa"},"404":{"description":"Conversa não encontrada"}},"security":[{"JWT-auth":[]}],"summary":"Marcar mensagens como lidas","tags":["conversations"]}},"/api/conversations/{conversacaoId}/mute":{"put":{"description":"Ativa ou desativa notificações de uma conversa específica para o usuário atual.","operationId":"ConversationsController_muteConversation","parameters":[{"name":"conversacaoId","required":true,"in":"path","description":"ID da conversa","schema":{"type":"string"}},{"name":"mute","required":true,"in":"query","description":"true para silenciar, false para dessilenciar","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Status de silenciamento atualizado"},"403":{"description":"Sem permissão para modificar esta conversa"},"404":{"description":"Conversa não encontrada"}},"security":[{"JWT-auth":[]}],"summary":"Silenciar/dessilenciar conversa","tags":["conversations"]}},"/api/conversations/{conversacaoId}/pin":{"put":{"description":"Fixa ou desafixa uma conversa no topo da lista para o usuário atual.","operationId":"ConversationsController_pinConversation","parameters":[{"name":"conversacaoId","required":true,"in":"path","description":"ID da conversa","schema":{"type":"string"}},{"name":"pin","required":true,"in":"query","description":"true para fixar, false para desafixar","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Status de fixação atualizado"},"403":{"description":"Sem permissão para modificar esta conversa"},"404":{"description":"Conversa não encontrada"}},"security":[{"JWT-auth":[]}],"summary":"Fixar/desafixar conversa","tags":["conversations"]}},"/api/conversations/{conversacaoId}":{"delete":{"description":"Arquiva uma conversa para o usuário atual (soft delete por usuário). A conversa continua existindo para o outro participante.","operationId":"ConversationsController_archiveConversation","parameters":[{"name":"conversacaoId","required":true,"in":"path","description":"ID da conversa","schema":{"type":"string"}}],"responses":{"200":{"description":"Conversa arquivada com sucesso"},"403":{"description":"Sem permissão para arquivar esta conversa"},"404":{"description":"Conversa não encontrada"}},"security":[{"JWT-auth":[]}],"summary":"Arquivar conversa","tags":["conversations"]}},"/api/conversations/users/{userId}/block":{"post":{"description":"Bloqueia um usuário, impedindo futuras interações (mensagens, likes, etc).","operationId":"ConversationsController_blockUser","parameters":[{"name":"userId","required":true,"in":"path","description":"ID do usuário a ser bloqueado","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockUserDto"}}}},"responses":{"201":{"description":"Usuário bloqueado com sucesso"},"400":{"description":"Usuário já está bloqueado ou tentativa de auto-bloqueio"},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Bloquear usuário","tags":["conversations"]}},"/api/conversations/users/{userId}/report":{"post":{"description":"Reporta um usuário por comportamento inadequado. A denúncia será analisada pela equipe de moderação.","operationId":"ConversationsController_reportUser","parameters":[{"name":"userId","required":true,"in":"path","description":"ID do usuário a ser reportado","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportUserDto"}}}},"responses":{"201":{"description":"Usuário reportado com sucesso"},"400":{"description":"Tentativa de auto-denúncia"},"404":{"description":"Usuário não encontrado"}},"security":[{"JWT-auth":[]}],"summary":"Reportar usuário","tags":["conversations"]}},"/api/cleanup/run-manual":{"post":{"description":"Executa manualmente o processo de limpeza de itens finalizados há mais de 30 dias. Remove soft delete no banco e deleta imagens do MinIO.","operationId":"CleanupController_runManualCleanup","parameters":[],"responses":{"201":{"description":"Limpeza executada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"deletedItems":{"type":"number"},"deletedImages":{"type":"number"},"errors":{"type":"array","items":{"type":"string"}},"message":{"type":"string"}}}}}},"401":{"description":"Não autorizado"}},"security":[{"JWT-auth":[]}],"summary":"Executar limpeza manual (Admin)","tags":["cleanup"]}}},"info":{"title":"Swepee Backend API","description":"API REST para plataforma de troca e doação de itens\n\n","version":"1.0.0","contact":{}},"tags":[{"name":"health","description":"Health check endpoints"},{"name":"auth","description":"Authentication and authorization endpoints"},{"name":"users","description":"User management endpoints"},{"name":"items","description":"Item management endpoints"},{"name":"discovery","description":"Discovery and matching endpoints"},{"name":"donations","description":"Donation verification endpoints"},{"name":"gamification","description":"Coins and rewards endpoints"},{"name":"search","description":"Search and filtering endpoints"},{"name":"notifications","description":"Notification endpoints"},{"name":"premium","description":"Premium subscription endpoints"}],"servers":[],"components":{"securitySchemes":{"JWT-auth":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"JWT","description":"Insira o JWT token obtido através do login.\n\nExemplo de formato: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","in":"header"}},"schemas":{"RegisterDto":{"type":"object","properties":{"nome":{"type":"string","description":"Nome completo do usuário","example":"João Silva","minLength":2,"maxLength":255},"email":{"type":"string","description":"Email do usuário","example":"joao@example.com"},"senha":{"type":"string","description":"Senha do usuário","example":"MinhaSenh@123","minLength":6}},"required":["nome","email","senha"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","description":"Email do usuário","example":"joao@example.com"},"senha":{"type":"string","description":"Senha do usuário","example":"MinhaSenh@123","minLength":6}},"required":["email","senha"]},"ForgotPasswordDto":{"type":"object","properties":{"email":{"type":"string","description":"Email do usuário","example":"joao@example.com"}},"required":["email"]},"ResetPasswordDto":{"type":"object","properties":{"token":{"type":"string","description":"Token de reset de senha","example":"abc123def456"},"email":{"type":"string","description":"Email do usuário","example":"joao@example.com"},"novaSenha":{"type":"string","description":"Nova senha do usuário","example":"NovaSenh@123","minLength":6}},"required":["token","email","novaSenha"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string","description":"Refresh token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}},"required":["refreshToken"]},"OAuthLinkDto":{"type":"object","properties":{"provider":{"type":"string","example":"google","description":"OAuth provider (google, apple)","enum":["google","apple"]},"email":{"type":"string","example":"user@example.com","description":"Email of the user to link OAuth account"},"password":{"type":"string","example":"password123","description":"Current password to verify account ownership"}},"required":["provider","email","password"]},"RedesSociaisDto":{"type":"object","properties":{"instagram":{"type":"string","description":"Instagram handle"},"twitter":{"type":"string","description":"Twitter handle"},"facebook":{"type":"string","description":"Facebook profile"},"linkedin":{"type":"string","description":"LinkedIn profile"}}},"UpdateUserDto":{"type":"object","properties":{"nome":{"type":"string","description":"Nome completo do usuário","example":"João Silva"},"email":{"type":"string","description":"Email do usuário","example":"joao@example.com"},"telefone":{"type":"string","description":"Telefone do usuário","example":"11999887766"},"localizacao":{"type":"string","description":"Localização do usuário","example":"São Paulo, SP"},"latitude":{"type":"number","description":"Latitude da localização","example":-23.5505},"longitude":{"type":"number","description":"Longitude da localização","example":-46.6333},"bio":{"type":"string","description":"Biografia do usuário","example":"Apaixonado por trocas sustentáveis!"},"avatar":{"type":"string","description":"URL do avatar","example":"https://storage.example.com/avatar.jpg"},"coverImage":{"type":"string","description":"URL da imagem de capa","example":"https://storage.example.com/cover.jpg"},"redesSociais":{"description":"Redes sociais do usuário","allOf":[{"$ref":"#/components/schemas/RedesSociaisDto"}]}}},"ChangePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string","description":"Senha atual do usuário","example":"minhasenhaatual123"},"newPassword":{"type":"string","description":"Nova senha do usuário (mínimo 8 caracteres, deve conter letra maiúscula, minúscula, número e símbolo)","example":"NovaSenha123!"}},"required":["currentPassword","newPassword"]},"PrivacidadeDto":{"type":"object","properties":{"perfilPublico":{"type":"boolean","description":"Perfil público","example":true},"mostrarTelefone":{"type":"boolean","description":"Mostrar telefone","example":false},"mostrarLocalizacao":{"type":"boolean","description":"Mostrar localização","example":true}}},"UpdateUserSettingsDto":{"type":"object","properties":{"privacidade":{"description":"Configurações de privacidade","allOf":[{"$ref":"#/components/schemas/PrivacidadeDto"}]}}},"UploadAvatarResponseDto":{"type":"object","properties":{"avatarUrl":{"type":"string","description":"URL do avatar carregado","example":"/uploads/avatars/1234567890-avatar.webp"},"message":{"type":"string","description":"Mensagem de sucesso","example":"Avatar carregado com sucesso"}},"required":["avatarUrl","message"]},"AspectosAvaliadosDto":{"type":"object","properties":{"comunicacao":{"type":"number","description":"Comunicação (1-5)","minimum":1,"maximum":5},"pontualidade":{"type":"number","description":"Pontualidade (1-5)","minimum":1,"maximum":5},"qualidadeItem":{"type":"number","description":"Qualidade do item (1-5)","minimum":1,"maximum":5},"condicaoItem":{"type":"number","description":"Condição do item (1-5)","minimum":1,"maximum":5},"atencimento":{"type":"number","description":"Atendimento (1-5)","minimum":1,"maximum":5}}},"CreateRatingDto":{"type":"object","properties":{"rating":{"type":"number","description":"Nota de 1 a 5","example":5,"minimum":1,"maximum":5},"comment":{"type":"string","description":"Comentário sobre a avaliação","example":"Usuário muito confiável e comunicativo!"},"transactionType":{"type":"string","description":"Tipo de transação","enum":["troca","doacao"],"example":"troca"},"conversationId":{"type":"string","description":"ID da conversa relacionada","example":"550e8400-e29b-41d4-a716-446655440000"},"itemId":{"type":"string","description":"ID do item relacionado","example":"550e8400-e29b-41d4-a716-446655440001"},"aspects":{"description":"Aspectos específicos avaliados","allOf":[{"$ref":"#/components/schemas/AspectosAvaliadosDto"}]},"isPublic":{"type":"boolean","description":"Se a avaliação deve ser pública","example":true}},"required":["rating","transactionType","conversationId"]},"InformacoesExtrasDto":{"type":"object","properties":{"marca":{"type":"string","description":"Marca do item"},"modelo":{"type":"string","description":"Modelo do item"},"cor":{"type":"string","description":"Cor do item"},"tamanho":{"type":"string","description":"Tamanho do item"},"peso":{"type":"number","description":"Peso do item em gramas"},"dimensoes":{"type":"object","description":"Dimensões do item","properties":{"largura":{"type":"number"},"altura":{"type":"number"},"profundidade":{"type":"number"}}}}},"CreateItemDto":{"type":"object","properties":{"titulo":{"type":"string","description":"Título do item","maxLength":255},"descricao":{"type":"string","description":"Descrição detalhada do item"},"categoria":{"type":"string","description":"Categoria do item","maxLength":100},"subcategoria":{"type":"string","description":"Subcategoria do item","maxLength":100},"tipo":{"type":"string","description":"Tipo de transação","enum":["troca","doacao","venda"]},"preco":{"type":"number","description":"Preço do item (para vendas)"},"condicao":{"type":"string","description":"Condição do item","enum":["novo","seminovo","usado"]},"localizacao":{"type":"string","description":"Localização do item"},"latitude":{"type":"number","description":"Latitude da localização"},"longitude":{"type":"number","description":"Longitude da localização"},"destacado":{"type":"boolean","description":"Item destacado","default":false},"tags":{"description":"Tags do item","maxItems":10,"type":"array","items":{"type":"string"}},"informacoesExtras":{"description":"Informações extras do item","allOf":[{"$ref":"#/components/schemas/InformacoesExtrasDto"}]}},"required":["titulo","descricao","categoria","subcategoria","tipo","condicao","localizacao"]},"ItemOwnerDto":{"type":"object","properties":{"id":{"type":"string","description":"ID do usuário"},"nome":{"type":"string","description":"Nome do usuário"},"avatar":{"type":"string","description":"Avatar do usuário"},"avaliacaoMedia":{"type":"string","description":"Avaliação média do usuário"},"totalAvaliacoes":{"type":"number","description":"Total de avaliações recebidas"}},"required":["id","nome","avaliacaoMedia","totalAvaliacoes"]},"ItemResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"ID único do item"},"titulo":{"type":"string","description":"Título do item"},"descricao":{"type":"string","description":"Descrição do item"},"categoria":{"type":"string","description":"Categoria do item"},"subcategoria":{"type":"string","description":"Subcategoria do item"},"tipo":{"type":"string","description":"Tipo de transação","enum":["troca","doacao","venda"]},"preco":{"type":"number","description":"Preço do item"},"condicao":{"type":"string","description":"Condição do item","enum":["novo","seminovo","usado"]},"imagens":{"description":"Imagens do item","type":"array","items":{"type":"string"}},"status":{"type":"string","description":"Status do item","enum":["ativo","pendente","inativo","vendido","trocado"]},"localizacao":{"type":"string","description":"Localização do item"},"latitude":{"type":"number","description":"Latitude da localização"},"longitude":{"type":"number","description":"Longitude da localização"},"visualizacoes":{"type":"number","description":"Número de visualizações"},"likes":{"type":"number","description":"Número de likes"},"matches":{"type":"number","description":"Número de matches"},"dataEncerramento":{"format":"date-time","type":"string","description":"Data de encerramento"},"destacado":{"type":"boolean","description":"Item destacado"},"tags":{"description":"Tags do item","type":"array","items":{"type":"string"}},"informacoesExtras":{"description":"Informações extras","allOf":[{"$ref":"#/components/schemas/InformacoesExtrasDto"}]},"usuario":{"description":"Proprietário do item","allOf":[{"$ref":"#/components/schemas/ItemOwnerDto"}]},"createdAt":{"format":"date-time","type":"string","description":"Data de criação"},"updatedAt":{"format":"date-time","type":"string","description":"Data de atualização"}},"required":["id","titulo","descricao","categoria","subcategoria","tipo","condicao","imagens","status","localizacao","visualizacoes","likes","matches","destacado","usuario","createdAt","updatedAt"]},"PaginatedItemsResponseDto":{"type":"object","properties":{"items":{"description":"Lista de itens","type":"array","items":{"$ref":"#/components/schemas/ItemResponseDto"}},"total":{"type":"number","description":"Total de itens encontrados"},"page":{"type":"number","description":"Página atual"},"limit":{"type":"number","description":"Itens por página"},"totalPages":{"type":"number","description":"Total de páginas"},"hasNext":{"type":"boolean","description":"Há próxima página"},"hasPrev":{"type":"boolean","description":"Há página anterior"}},"required":["items","total","page","limit","totalPages","hasNext","hasPrev"]},"UpdateItemDto":{"type":"object","properties":{"titulo":{"type":"string","description":"Título do item","maxLength":255},"descricao":{"type":"string","description":"Descrição detalhada do item"},"categoria":{"type":"string","description":"Categoria do item","maxLength":100},"subcategoria":{"type":"string","description":"Subcategoria do item","maxLength":100},"preco":{"type":"number","description":"Preço do item (para vendas)"},"condicao":{"type":"string","description":"Condição do item","enum":["novo","seminovo","usado"]},"localizacao":{"type":"string","description":"Localização do item"},"latitude":{"type":"number","description":"Latitude da localização"},"longitude":{"type":"number","description":"Longitude da localização"},"destacado":{"type":"boolean","description":"Item destacado","default":false},"tags":{"description":"Tags do item","maxItems":10,"type":"array","items":{"type":"string"}},"informacoesExtras":{"description":"Informações extras do item","allOf":[{"$ref":"#/components/schemas/InformacoesExtrasDto"}]},"status":{"type":"string","description":"Status do item","enum":["ativo","pendente","inativo","vendido","trocado"]}}},"UploadItemImagesResponseDto":{"type":"object","properties":{"imagens":{"description":"URLs das imagens carregadas","type":"array","items":{"type":"string"}},"totalImagens":{"type":"number","description":"Número total de imagens do item"},"message":{"type":"string","description":"Mensagem de sucesso"}},"required":["imagens","totalImagens","message"]},"ItemStatsDto":{"type":"object","properties":{"visualizacoes":{"type":"number","description":"Número total de visualizações"},"likes":{"type":"number","description":"Número total de likes"},"matches":{"type":"number","description":"Número total de matches"},"visualizacoesHoje":{"type":"number","description":"Visualizações hoje"},"visualizacoesSemana":{"type":"number","description":"Visualizações esta semana"},"visualizacoesMes":{"type":"number","description":"Visualizações este mês"}},"required":["visualizacoes","likes","matches","visualizacoesHoje","visualizacoesSemana","visualizacoesMes"]},"UpdateItemStatusDto":{"type":"object","properties":{"status":{"type":"string","description":"Novo status do item","enum":["ativo","pendente","inativo","vendido","trocado"],"example":"ativo"}},"required":["status"]},"DiscoveryItemOwnerDto":{"type":"object","properties":{"id":{"type":"string","description":"ID do usuário"},"nome":{"type":"string","description":"Nome do usuário"},"avatar":{"type":"string","description":"Avatar do usuário"},"avaliacaoMedia":{"type":"string","description":"Avaliação média do usuário"},"totalAvaliacoes":{"type":"number","description":"Total de avaliações recebidas"},"distancia":{"type":"number","description":"Distância em KM"}},"required":["id","nome","avaliacaoMedia","totalAvaliacoes"]},"DiscoveryItemDto":{"type":"object","properties":{"id":{"type":"string","description":"ID único do item"},"titulo":{"type":"string","description":"Título do item"},"descricao":{"type":"string","description":"Descrição do item"},"categoria":{"type":"string","description":"Categoria do item"},"subcategoria":{"type":"string","description":"Subcategoria do item"},"tipo":{"type":"string","description":"Tipo de transação"},"preco":{"type":"number","description":"Preço do item"},"condicao":{"type":"string","description":"Condição do item"},"imagens":{"description":"Imagens do item","type":"array","items":{"type":"string"}},"localizacao":{"type":"string","description":"Localização do item"},"distancia":{"type":"number","description":"Distância em KM do usuário"},"visualizacoes":{"type":"number","description":"Número de visualizações"},"likes":{"type":"number","description":"Número de likes"},"tags":{"description":"Tags do item","type":"array","items":{"type":"string"}},"usuario":{"description":"Proprietário do item","allOf":[{"$ref":"#/components/schemas/DiscoveryItemOwnerDto"}]},"createdAt":{"format":"date-time","type":"string","description":"Data de criação"}},"required":["id","titulo","descricao","categoria","subcategoria","tipo","condicao","imagens","localizacao","visualizacoes","likes","usuario","createdAt"]},"FeedResponseDto":{"type":"object","properties":{"items":{"description":"Lista de itens no feed","type":"array","items":{"$ref":"#/components/schemas/DiscoveryItemDto"}},"total":{"type":"number","description":"Total de itens disponíveis"},"page":{"type":"number","description":"Página atual"},"limit":{"type":"number","description":"Itens por página"},"totalPages":{"type":"number","description":"Total de páginas"},"hasNext":{"type":"boolean","description":"Há próxima página"}},"required":["items","total","page","limit","totalPages","hasNext"]},"LikeItemDto":{"type":"object","properties":{"tipo":{"type":"string","description":"Tipo do like","enum":["like","superlike"],"default":"like"}}},"LikeResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem de sucesso"},"isMatch":{"type":"boolean","description":"Indica se houve um match"},"matchId":{"type":"string","description":"ID do match criado"},"conversacaoId":{"type":"string","description":"ID da conversa criada"}},"required":["message","isMatch"]},"LikedItemDto":{"type":"object","properties":{"id":{"type":"string","description":"ID único do item"},"titulo":{"type":"string","description":"Título do item"},"descricao":{"type":"string","description":"Descrição do item"},"categoria":{"type":"string","description":"Categoria do item"},"subcategoria":{"type":"string","description":"Subcategoria do item"},"tipo":{"type":"string","description":"Tipo de transação"},"preco":{"type":"number","description":"Preço do item"},"condicao":{"type":"string","description":"Condição do item"},"imagens":{"description":"Imagens do item","type":"array","items":{"type":"string"}},"localizacao":{"type":"string","description":"Localização do item"},"distancia":{"type":"number","description":"Distância em KM do usuário"},"visualizacoes":{"type":"number","description":"Número de visualizações"},"likes":{"type":"number","description":"Número de likes"},"tags":{"description":"Tags do item","type":"array","items":{"type":"string"}},"usuario":{"description":"Proprietário do item","allOf":[{"$ref":"#/components/schemas/DiscoveryItemOwnerDto"}]},"createdAt":{"format":"date-time","type":"string","description":"Data de criação"},"likeTipo":{"type":"string","description":"Tipo do like"},"dataLike":{"format":"date-time","type":"string","description":"Data do like"},"hasMatch":{"type":"boolean","description":"Indica se houve match"}},"required":["id","titulo","descricao","categoria","subcategoria","tipo","condicao","imagens","localizacao","visualizacoes","likes","usuario","createdAt","likeTipo","dataLike","hasMatch"]},"LikedItemsResponseDto":{"type":"object","properties":{"items":{"description":"Lista de itens curtidos","type":"array","items":{"$ref":"#/components/schemas/LikedItemDto"}},"total":{"type":"number","description":"Total de itens curtidos"},"page":{"type":"number","description":"Página atual"},"limit":{"type":"number","description":"Itens por página"},"totalPages":{"type":"number","description":"Total de páginas"},"hasNext":{"type":"boolean","description":"Há próxima página"}},"required":["items","total","page","limit","totalPages","hasNext"]},"MatchDto":{"type":"object","properties":{"id":{"type":"string","description":"ID do match"},"tipo":{"type":"string","description":"Tipo de match"},"dataMatch":{"format":"date-time","type":"string","description":"Data do match"},"item":{"description":"Item que gerou o match","allOf":[{"$ref":"#/components/schemas/DiscoveryItemDto"}]},"outroUsuario":{"description":"Outro usuário do match","allOf":[{"$ref":"#/components/schemas/DiscoveryItemOwnerDto"}]},"conversacaoId":{"type":"string","description":"ID da conversa"},"visualizado":{"type":"boolean","description":"Match visualizado"}},"required":["id","tipo","dataMatch","item","outroUsuario","visualizado"]},"MatchesResponseDto":{"type":"object","properties":{"matches":{"description":"Lista de matches","type":"array","items":{"$ref":"#/components/schemas/MatchDto"}},"total":{"type":"number","description":"Total de matches"},"naoVisualizados":{"type":"number","description":"Total de matches não visualizados"}},"required":["matches","total","naoVisualizados"]},"ConversationParticipantDto":{"type":"object","properties":{"id":{"type":"string","description":"ID do usuário"},"nome":{"type":"string","description":"Nome do usuário"},"avatar":{"type":"string","description":"Avatar do usuário"},"isOnline":{"type":"boolean","description":"Indica se o usuário está online"},"lastSeen":{"format":"date-time","type":"string","description":"Última vez online"}},"required":["id","nome","isOnline"]},"ConversationItemDto":{"type":"object","properties":{"id":{"type":"string","description":"ID do item"},"titulo":{"type":"string","description":"Título do item"},"imagem":{"type":"string","description":"Primeira imagem do item"}},"required":["id","titulo"]},"ConversationDto":{"type":"object","properties":{"id":{"type":"string","description":"ID da conversa"},"tipo":{"type":"string","description":"Tipo da conversa"},"outroParticipante":{"description":"Outro participante da conversa","allOf":[{"$ref":"#/components/schemas/ConversationParticipantDto"}]},"item":{"description":"Item relacionado","allOf":[{"$ref":"#/components/schemas/ConversationItemDto"}]},"ultimaMensagem":{"type":"string","description":"Última mensagem"},"dataUltimaMensagem":{"format":"date-time","type":"string","description":"Data da última mensagem"},"mensagensNaoLidas":{"type":"number","description":"Número de mensagens não lidas"},"silenciada":{"type":"boolean","description":"Conversa está silenciada"},"fixada":{"type":"boolean","description":"Conversa está fixada"},"arquivada":{"type":"boolean","description":"Conversa está arquivada"},"createdAt":{"format":"date-time","type":"string","description":"Data de criação"},"updatedAt":{"format":"date-time","type":"string","description":"Data de atualização"}},"required":["id","tipo","outroParticipante","mensagensNaoLidas","silenciada","fixada","arquivada","createdAt","updatedAt"]},"ConversationListResponseDto":{"type":"object","properties":{"conversations":{"description":"Lista de conversas","type":"array","items":{"$ref":"#/components/schemas/ConversationDto"}},"total":{"type":"number","description":"Total de conversas"},"totalUnread":{"type":"number","description":"Total de mensagens não lidas"},"page":{"type":"number","description":"Página atual"},"limit":{"type":"number","description":"Itens por página"},"totalPages":{"type":"number","description":"Total de páginas"},"hasNext":{"type":"boolean","description":"Há próxima página"}},"required":["conversations","total","totalUnread","page","limit","totalPages","hasNext"]},"MessageAttachmentDto":{"type":"object","properties":{"url":{"type":"string","description":"URL do anexo"},"nome":{"type":"string","description":"Nome do arquivo"},"tipo":{"type":"string","description":"Tipo do anexo"},"tamanho":{"type":"number","description":"Tamanho em bytes"}},"required":["url","nome","tipo","tamanho"]},"MessageDto":{"type":"object","properties":{"id":{"type":"string","description":"ID da mensagem"},"conversacaoId":{"type":"string","description":"ID da conversa"},"remetenteId":{"type":"string","description":"ID do remetente"},"remetenteNome":{"type":"string","description":"Nome do remetente"},"remetenteAvatar":{"type":"string","description":"Avatar do remetente"},"texto":{"type":"string","description":"Conteúdo da mensagem"},"tipo":{"type":"string","description":"Tipo da mensagem"},"anexos":{"description":"Anexos da mensagem","type":"array","items":{"$ref":"#/components/schemas/MessageAttachmentDto"}},"lida":{"type":"boolean","description":"Mensagem foi lida"},"dataLeitura":{"format":"date-time","type":"string","description":"Data de leitura"},"entregue":{"type":"boolean","description":"Mensagem foi entregue"},"dataEntrega":{"format":"date-time","type":"string","description":"Data de entrega"},"timestamp":{"format":"date-time","type":"string","description":"Timestamp da mensagem"},"mensagemPaiId":{"type":"string","description":"ID da mensagem pai (reply)"},"editada":{"type":"boolean","description":"Mensagem foi editada"},"dataEdicao":{"format":"date-time","type":"string","description":"Data da última edição"},"isOwn":{"type":"boolean","description":"É mensagem do usuário atual"}},"required":["id","conversacaoId","remetenteId","remetenteNome","texto","tipo","lida","entregue","timestamp","editada","isOwn"]},"MessageListResponseDto":{"type":"object","properties":{"messages":{"description":"Lista de mensagens","type":"array","items":{"$ref":"#/components/schemas/MessageDto"}},"total":{"type":"number","description":"Total de mensagens na conversa"},"hasMore":{"type":"boolean","description":"Há mensagens mais antigas"},"lastMessageId":{"type":"string","description":"ID da última mensagem retornada"}},"required":["messages","total","hasMore"]},"CreateMessageDto":{"type":"object","properties":{"texto":{"type":"string","description":"Conteúdo da mensagem"},"tipo":{"type":"string","description":"Tipo da mensagem","enum":["texto","imagem","audio","arquivo"],"default":"texto"},"mensagemPaiId":{"type":"string","description":"ID da mensagem pai (para respostas)"}},"required":["texto"]},"BlockUserDto":{"type":"object","properties":{"motivo":{"type":"string","description":"Motivo do bloqueio","maxLength":500}}},"ReportUserDto":{"type":"object","properties":{"motivo":{"type":"string","description":"Motivo da denúncia"},"detalhes":{"type":"string","description":"Detalhes adicionais da denúncia","maxLength":1000}},"required":["motivo"]}}}}